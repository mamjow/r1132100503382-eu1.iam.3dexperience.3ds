define("DS/Usage/GDPR",function(){"use strict";Number.isInteger||(Number.isInteger=function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e});var e=["status","privacyVersion","consentCategories","blockedOnCategories","creationTimestamp"],t=["necessary","functional","advertising"],a={getCookie:function(e){var t,a,n=[];try{n=document.cookie.split("; ")}catch(e){}return(t=n.filter(function(t){return t.split("=")[0]===e})).length&&(a=t[0].split("=")[1]),a},getIndexFromRank:function(e){if(e=parseInt(e),Number.isInteger(e))return e-1;throw new Error("GDPR : Cookie rank must be an integer")},decode:function(e,n){var r=n.includes("%2C")?n.split("%2C"):n;if("consentCategories"===e)if(n)if(Array.isArray(r))r=r.map(function(e){var n=a.getIndexFromRank(e);return t[n]});else{var o=a.getIndexFromRank(n);r=o?[t[o]]:r}else r=[t[0]];return r},getModel:function(){var t=a.getCookie("TC_PRIVACY"),n=[],r={status:0,privacyVersion:"001",consentCategories:[],blockedOnCategories:1,creationTimestamp:Date.now()};if(t){var o=t.indexOf("%40")>=0?"%40":"@";n=t.split(o)}return n.forEach(function(t,n){var o=e[n];r[o]=a.decode(o,t)}),r}};return{get:a.getModel,getConsentCategories:function(){return this.get().consentCategories},isFunctionalConsent:function(){return this.getConsentCategories().includes(t[1])},hasConsent:function(){return!!this.getConsentCategories().length}}}),define("DS/Usage/Events",function(){"use strict";return{counter:{increment:"counter:increment"},timer:{start:"timer:start",stop:"timer:stop"},tracker:{creation:"tracker:creation",update:"tracker:update",getContent:"tracker:get-content",gotContent:"tracker:got-content"},page:{view:"page:view",event:"page:event",interaction:"page:interaction",performance:"page:performance"},interaction:{custom:"interaction:custom"},performance:{enableCustomPerformance:"performance:enablecustom",custom:"performance:custom"},data:{register:"data:register"},window:{init:"window:init"},error:{runtime:"error:runtime",custom:"error:custom"},gdpr_banner:{custom:"gdpr_banner:custom"}}}),define("DS/Usage/XMLHttpRequest",[],function(){return{patch:function(e,t,a){a||(a=window),a.XMLHttpRequest.prototype.__open||a.XMLHttpRequest.prototype.__send||(a.XMLHttpRequest.prototype.__open=a.XMLHttpRequest.prototype.open,a.XMLHttpRequest.prototype.open=function(e,t){this.method=e,this.url=t,this.__open.apply(this,arguments)},a.XMLHttpRequest.prototype.__send=a.XMLHttpRequest.prototype.send,a.XMLHttpRequest.prototype.send=function(){this.time=Date.now(),this.__onreadystatechange=this.onreadystatechange,this.onreadystatechange=function(a){try{var n=a&&a.currentTarget||{status:0,statusText:"",responseText:""};if(n.status>=400&&!this._tracked&&!this.url.startsWith(t)&&4==this.readyState){var r=Date.now()-this.time;e({url:n.url,code:n.status.toString(),method:n.method,duration:r,message:n.responseText.slice(0,2047)||n.statusText.slice(0,2047)}),this._tracked=!0}}catch(e){}finally{this.__onreadystatechange&&this.__onreadystatechange.apply(this,arguments)}},this.onerror=function(a){try{var n=a&&a.currentTarget||{status:0,statusText:"",responseText:""};if(!this._tracked&&!this.url.startsWith(t)&&4==this.readyState){var r=Date.now()-this.time;e({url:n.url,code:n.status.toString(),method:n.method,duration:r,message:n.responseText.slice(0,2047)||n.statusText.slice(0,2047),type:"xhr"}),this._tracked=!0}}catch(e){}},this.__send.apply(this,arguments)})},patchFetch:function(e,t,a){a.fetch=new Proxy(a.fetch,{apply:function(a,n,r){let o=a.apply(n,r);try{const a=Date.now();o.then(n=>{const r=Date.now()-a;n.ok||!n.url||n.url.startsWith(t)||e({url:n.url,code:n.status.toString(),duration:r,message:n.statusText&&n.statusText.slice(0,2047)||null,type:"fetch"})}).catch(t=>{const n=Date.now()-a;e({url:r[0],duration:n,message:t.message,stack:t.stack,type:"fetch"})})}catch(e){}return o}})}}}),define("DS/Usage/UsageShardingManager",["DS/WebappsUtils/Inherit","DS/WebappsUtils/Utils","DS/Usage/XMLHttpRequest","DS/Usage/Events","DS/Usage/GDPR"],function(e,t,a,n,r){var o={themKey:"webapp",interactionLast10min:0,isLoadEventEndExists:!1,user:null,newVisitor:!1,trackerVersion:"2.0.17"},s=[];const c=new Map;var d,p,u,g={scrollable:function(e){return e.clientWidth<e.offsetWidth||"scroll"==e.style.overflowY||"auto"==e.style.overflowY},getAppScrollableContainer:function(e){for(var t,a=e;a;)a.clientHeight<a.scrollHeight&&this.scrollable(a)&&(t=a),a=a.parentNode;return t||document.body},containerHeight:function(e){var t=Math.max(e.scrollHeight,e.offsetHeight,e.clientHeight);return e.getBoundingClientRect().top+t},containerWidth:function(e){var t=Math.max(e.scrollWidth,e.offsetWidth,e.clientWidth);return e.getBoundingClientRect().left+t},viewportTop:function(e){return e.scrollTop},viewportBottom:function(e){return this.viewportTop(e)+(window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight)},viewportLeft:function(e){return e.scrollLeft},viewportRight:function(e){return this.viewportLeft(e)+(window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)}},l=function(e){var t=e.topic.split(":");return(t=t.length>2?t.slice(0,2):t).join(":")},m={flatten:function(t,a){t[a]&&Array.isArray(t[a])&&(t[a].forEach(function(a){e.extend(t,a)}),delete t[a])},flattenData:function(e){e&&e.data&&["persDimPages","persValPages","persDimPageEvents","persDimInteractions","persValPageEvents","persDimPageError","persValPageError","persValInteractions"].forEach(function(t){m.flatten(e.data,t)})},parseQuery:function(e){var t=e.substring(e.indexOf("?")+1).split(/[&;]/),a={};return t.length&&t.forEach(function(e){var t=e.indexOf("=")+1,n=t?e.substr(t):"",r=t?e.substr(0,t-1).match(/([^\]\[]+|(\B)(?=\]))/g):[e],o=a;r&&(n=decodeURIComponent(n),r.forEach(function(e,t){e=decodeURIComponent(e);var a=o[e];t<r.length-1?o=o[e]=a||{}:Array.isArray(a)?a.push(n):o[e]=void 0!==a?[a,n]:n}))}),a},parseUrl:(p=["source","subprotocol","protocol","authority","user","password","domain","port","path","directoryPath","fileName","query","anchor"],u=new RegExp("^(?:(?:(?:([^#.:]+):)?([^#.:]+):)?//)?((?:([^:/]+)(?::([^/]*?))?@)?([^:/?#]*)(?::(\\d*))?)?((/(?:[^?#](?![^?#/]*\\.[^?#/.]+(?:[\\?#]|$)))*/?)?([^?#/]*))?(?:\\?([^#]*))?(?:#(.*))?"),function(e){var t,a=u.exec(e),n={};for(t=0;t<p.length;t++)n[p[t]]=a[t]||"";return n.subprotocol&&(n.source=n.source.substr(n.subprotocol.length+1)),n.port||(n.port="https"===n.protocol?"443":"80"),n.directoryPath&&n.directoryPath.length>0&&(n.directoryPath=n.directoryPath.replace(/\/?$/,"/")),n.domain=n.domain.toLocaleLowerCase(),n.protocol=n.protocol.toLocaleLowerCase(),n}),clearData:function(e){e.sessions=[];var t={};e.pages.forEach(function(e){t[e.trackerscope]=e}),t=Object.keys(t).map(function(e){return t[e]}),e.pages=t.sort(function(e,t){return e.timestamp-t.timestamp}),e.interactions=[],e.events=[],e.errors=[],e.performances=[]},pruneData:function(e){e.sessions=e.sessions.slice(0,100),e.pages=e.pages.slice(0,100),e.interactions=e.interactions.slice(0,100),e.events=e.events.slice(0,100),e.performances=e.performances.slice(0,100)},getValidURL:(d=document.createElement("a"),function(e){return d.href=e,d.href}),models:[{internal:"pages",payload:"usage"},{internal:"events",payload:"usage"},{internal:"interactions",payload:"usage"},{internal:"performances",payload:"usage"},{internal:"errors",payload:"usage"},{internal:"sessions",payload:"cusage"}],getLastPageID:function(e,t){var a,n=e&&e.pages,r=[];return n&&n.length&&(r=t?n.filter(function(e){return e.trackerscope&&e.trackerscope===t}):n.filter(function(e){return!e.trackerscope})),(a=r.pop())&&a.id||""},getUTMParameters:function(){var e={},t=m.parseQuery(window.location.search);return t?(["utm_source","utm_medium","utm_campaign","utm_term","utm_content"].forEach(function(a){t.hasOwnProperty(a)&&(Array.isArray(t[a])?t[a].length>0&&(e[a]=t[a][0]):e[a]=t[a])}),e):e},getTopDomain:function(){var e,t=m.parseUrl(window.location).domain,a="";if(!/^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$/g.test(t)&&"localhost"!==t){for(e=t.split(".");e.length>2;)e.shift();a=e.join(".")}return a},getConsentsAttributes:function(){var e={};return r.isFunctionalConsent()?e={consent:!0,visitormode:"optin"}:r.hasConsent()?r.hasConsent()&&!r.isFunctionalConsent()&&(e={consent:!0,visitormode:"optout",casUser:"",user_uuid:"",cookie_vuid:"",user:""}):e={consent:!1,visitormode:"noconsent",casUser:"",user_uuid:"",cookie_vuid:""},e},getSession:function(a){return a=a||{},e.extend(a,{r_schemaName:"wasession4",r_schemaVersion:"1.67",r_service:o.service,tracker_version:o.trackerVersion,r_timestamp:Date.now(),timezone_offset:(new Date).getTimezoneOffset(),them:o.themKey,sessionID:t.getCookie("_dss"),cookie_vuid:t.getCookie("VUID"),user:t.getCookie("_dsu"),casUser:o.authUser?t.sha256(o.authUser):"",referrer:document.referrer,newVisitor:o.newVisitor,serverhostname:o.hostname,locale:navigator.language||"en-US",enginename:t.clientEngine.name,userAgent:t.clientEngine.userAgent,engineversion:t.clientEngine.version,userAgent:navigator.userAgent,platformname:t.clientPlatform.name,platformmobile:t.clientPlatform.mobile,resheight:t.clientPlatform.resheight,reswidth:t.clientPlatform.reswidth,startTime:o.navigationStart,is_crossdomain:!!o.isCrossDomain}),o.userUUID&&(a.user_uuid=t.sha256(o.userUUID)),e.extend(a,m.getUTMParameters()),e.extend(a,m.getConsentsAttributes()),a}},h={crossDomainApply:function(e){var t=["3ds.com$","solidworks.com$","solidworks.co.jp$","solidworks.co.kr$","solidworks.com.cn$","solidworks.com.tr$","solidworks.cz$","solidworks.de$","solidworks.es$","solidworks.fr$","solidworks.hu$","solidworks.it$","solidworks.pl$","home.by.me$","draftsight.com$","edrawingsviewer.com$","3dcontentcentral.cn$","3dcontentcentral.com$","3dcontentcentral.com.br$","3dcontentcentral.com.tr$","3dcontentcentral.de$","3dcontentcentral.es$","3dcontentcentral.fr$","3dcontentcentral.it$","3dcontentcentral.jp$","3dcontentcentral.kr$","3dcontentcentralsupplierbenefits.com$","3dexperienceworld.com$","lafondation3ds.org$","swugn.org$"],a=new URL(e),n=new URL(window.location.href);let r=a.hostname,s=n.hostname;for(i=0;i<t.length;i++)if(r.match(t[i])){if(s.match(t[i]))return null;return a.toString().length+o.sessionID.length+o.user.length+16>2048?null:(a.searchParams.set("3dssid",o.sessionID),a.searchParams.set("3dsvid",o.user),a.toString())}return null},crossDomainCheck:function(e){if(o.sessionID&&e.srcElement){e.srcElement.href?h.crossDomainApply(e.srcElement.href)&&(e.srcElement.href=h.crossDomainApply(e.srcElement.href)):e.srcElement.parentElement.href?h.crossDomainApply(e.srcElement.parentElement.href)&&(e.srcElement.parentElement.href=h.crossDomainApply(e.srcElement.parentElement.href)):e.srcElement.parentElement.parentElement.href&&h.crossDomainApply(e.srcElement.parentElement.parentElement.href)&&(e.srcElement.parentElement.parentElement.href=h.crossDomainApply(e.srcElement.parentElement.parentElement.href))}},getWidgetData:function(e){var t={};return e&&e.widget&&(t.widgetinstancetitle=e.widget.title,t.widgetinstanceid=e.widget.id,t.appID=e.widget.data&&e.widget.data.appId),t},startPerformanceTracking:function(e){var t=this;e.setInterval(function(){o.isLoadEventEndExists||h.getLoadingPerformanceTracking.bind(t,e)(),Date.now()-o.interactionLast10min<6e4&&h.getResourcePerformanceTracking.bind(t,e)()},5e3),h.getResourcePerformanceTracking.bind(t,e)()},getResourcePerformanceTracking:function(e){var t={initiatorType:[],blockingStatus:[],name:[],duration:[],startTime:[],transferSize:[],timeOrigin:performance.timeOrigin?Math.round(performance.timeOrigin):0};const a=e.frameElement?s.includes(e.frameElement.id):s.includes("top");if(e.performance.getEntriesByType("resource").map(e=>{e.name.match("/upload$")||e.initiatorType&&e.renderBlockingStatus&&e.name&&e.duration&&e.duration>50&&(!a||"fetch"!==e.initiatorType&&"xmlhttprequest"!==e.initiatorType)&&(t.initiatorType.push(e.initiatorType.slice(0,2)),"non-blocking"==e.renderBlockingStatus?t.blockingStatus.push("f"):t.blockingStatus.push("t"),t.name.push(e.name>2048?e.name.slice(0,2047):e.name),t.duration.push(Math.round(e.duration)),t.startTime.push(Math.round(e.startTime)),t.transferSize.push(Math.round(e.transferSize)))}),t.initiatorType.length>0){var r,o={topic:n.page.performance,data:{}};if(t.duration&&(o.data.d=t.duration),t.name&&(o.data.n=t.name),t.initiatorType&&(o.data.i=t.initiatorType),t.blockingStatus&&(o.data.b=t.blockingStatus),t.startTime&&(o.data.s=t.startTime),t.transferSize&&(o.data.ts=t.transferSize),t.timeOrigin&&(o.data.timeorigin=t.timeOrigin),!Object.keys(o.data).length)return;o.data={...o.data,...h.getWidgetData(e)},r={data:JSON.stringify(o)},this.readMessage(r)}e.performance.clearResourceTimings()},getLoadingPerformanceTracking:function(e){var t,a={topic:n.page.performance,data:{}};e.performance.getEntriesByType("navigation")[0].fetchStart&&(a.data.fetchstart=Math.round(e.performance.getEntriesByType("navigation")[0].fetchStart)),e.performance.getEntriesByType("navigation")[0].domainLookupStart&&(a.data.domainlookupstart=Math.round(e.performance.getEntriesByType("navigation")[0].domainLookupStart)),e.performance.getEntriesByType("navigation")[0].domainLookupEnd&&(a.data.domainlookupend=Math.round(e.performance.getEntriesByType("navigation")[0].domainLookupEnd)),e.performance.getEntriesByType("navigation")[0].connectStart&&(a.data.connectstart=Math.round(e.performance.getEntriesByType("navigation")[0].connectStart)),e.performance.getEntriesByType("navigation")[0].connectEnd&&(a.data.connectend=Math.round(e.performance.getEntriesByType("navigation")[0].connectEnd)),e.performance.getEntriesByType("navigation")[0].requestStart&&(a.data.requeststart=Math.round(e.performance.getEntriesByType("navigation")[0].requestStart)),e.performance.getEntriesByType("navigation")[0].responseStart&&(a.data.responsestart=Math.round(e.performance.getEntriesByType("navigation")[0].responseStart)),e.performance.getEntriesByType("navigation")[0].responseEnd&&(a.data.responseend=Math.round(e.performance.getEntriesByType("navigation")[0].responseEnd)),e.performance.getEntriesByType("navigation")[0].domInteractive&&(a.data.dominteractive=Math.round(e.performance.getEntriesByType("navigation")[0].domInteractive)),e.performance.getEntriesByType("navigation")[0].domComplete&&(a.data.domcomplete=Math.round(e.performance.getEntriesByType("navigation")[0].domComplete)),e.performance.getEntriesByType("navigation")[0].loadEventStart&&(a.data.loadeventstart=Math.round(e.performance.getEntriesByType("navigation")[0].loadEventStart)),e.performance.getEntriesByType("navigation")[0].loadEventEnd&&(a.data.loadeventend=Math.round(e.performance.getEntriesByType("navigation")[0].loadEventEnd),o.isLoadEventEndExists=!0),e.performance.getEntriesByType("navigation")[0].name&&(a.data.pagename=e.performance.getEntriesByType("navigation")[0].name>2048?e.performance.getEntriesByType("navigation")[0].name.slice(0,2047):e.performance.getEntriesByType("navigation")[0].name),e.performance.timeOrigin&&(a.data.timeorigin=Math.round(e.performance.timeOrigin)),a.data={...a.data,...h.getWidgetData(e)},Object.keys(a.data).length&&(t={data:JSON.stringify(a)},this.readMessage(t))},enableUserInteraction:function(a,r){o.interactionLast10min=Date.now();var i=r&&r.target,s=i&&g.getAppScrollableContainer(i),c={};if(i&&m.getLastPageID(this)&&("scroll"!==r.type||s===i)){e.extend(c,{interactionid:t.uuid(),action:r.type,viewportTop:g.viewportTop(s),viewportBottom:g.viewportBottom(s),viewportLeft:g.viewportLeft(s),viewportRight:g.viewportRight(s),pageWitdh:g.containerWidth(s),pageHeight:g.containerHeight(s)}),["id","className","tagName"].forEach(function(e){var t=i[e];t&&("string"==typeof t||t instanceof String)&&(c[e]=i[e])}),["clientX","clientY"].forEach(function(e){r[e]&&(c[e]=r[e]),r.touches&&r.touches[0]&&r.touches[0][e]&&(c[e]=r.touches[0][e])});var d={topic:n.page.interaction,data:c};d.data={...d.data,...h.getWidgetData(a)};var p={data:JSON.stringify(d)};this.readMessage(p)}},getRateLimitState:function(e){return c.get(e)},replaceRateLimitState:function(e,t,a){if(c.get(e)!==a)throw new Error("Attempted to take multiple tokens simultaneously");c.set(e,t)},update:function({tokenCount:e,timestamp:t},{RATE_LIMITER_INTERVAL:a,RATE_LIMITER_CAPACITY:n},r){const o=Math.floor((r-t)/a);var i=0;return{tokenCount:i=o>0?Math.min(e+o,n):e,timestamp:i<n?r:t}},take:function(e,t,a){var n=void 0,r=void 0;return e?(n=h.update(e,t,a).tokenCount,r=a):(n=t.RATE_LIMITER_CAPACITY,r=a),n>0&&a>=r?{tokenCount:n-1,timestamp:r}:{tokenCount:n,timestamp:r}},takeToken:function(e,t){const a=Date.now(),n=h.getRateLimitState(e),r=h.take(n,t,a);return h.replaceRateLimitState(e,r,n),!(r.tokenCount>0)},enableErrorTracking:function(e,t){if(!h.takeToken("error_runtime_key",{RATE_LIMITER_INTERVAL:5e3,RATE_LIMITER_CAPACITY:51})){var a,r={topic:n.error.runtime,data:{}};if(t.filename&&(r.data.source=t.filename),t.message&&(r.data.message=t.message),t.colno&&(r.data.column=t.colno),t.lineno&&(r.data.line=t.lineno),t.name&&(r.data.name=t.name),t.error&&t.error.name&&(r.data.name=t.error.name),t.stack&&(r.data.stack=t.stack),t.error&&t.error.stack&&(r.data.stack=t.error.stack),r.data.category="runtime",r.data={...r.data,...h.getWidgetData(e)},!Object.keys(r.data).length)return;a={data:JSON.stringify(r)},this.readMessage(a)}},enableUnhandledRejectionTracking:function(e,t){if(!h.takeToken("error_runtime_key",{RATE_LIMITER_INTERVAL:5e3,RATE_LIMITER_CAPACITY:51})){var a,r={topic:n.error.runtime,data:{}};if(t.reason&&("string"==typeof t.reason&&(r.data.message=t.reason),t.reason.message&&(r.data.message=t.reason.message),t.reason.stack&&(r.data.stack=t.reason.stack)),r.data.category="unhandledrejection",r.data={...r.data,...h.getWidgetData(e)},!Object.keys(r.data).length)return;a={data:JSON.stringify(r)},this.readMessage(a)}},enableXHRorFetchErrorTracking:function(e,t){var a,r={topic:n.error.runtime,data:{type:"xhr"}};if(!h.takeToken("error_XHR_key",{RATE_LIMITER_INTERVAL:5e3,RATE_LIMITER_CAPACITY:51})&&(!t.url||t.url&&t.url!==o.uploadPath)){if(t.url&&(r.data.targeturl=t.url),t.message&&(r.data.message=t.message),t.code&&(r.data.code=t.code),t.method&&(r.data.methodurl=t.method),t.duration&&(r.data.duration=t.duration),t.type&&(r.data.type=t.type),t.stack&&(r.data.stack=t.stack),r.data={...r.data,...h.getWidgetData(e)},Object.keys(r.data).length<2)return;a={data:JSON.stringify(r)},this.readMessage(a)}},manageCookies:function(){var a,n=t.getCookie("_dsus"),i=t.getCookie("_dsut"),s=m.getTopDomain();n&&t.setCookie("_dss",n,s,o.sessionDuration),i&&t.setPersistantCookie("_dsu",i,s),a=t.getCookie("_dss");var c=new URL(window.location.href);let d=null;c.searchParams.has("3dsvid")&&(d=c.searchParams.get("3dsvid"),c.searchParams.delete("3dsvid"),window.history.pushState({},"",c.toString())),c.searchParams.has("3dssid")&&(a=c.searchParams.get("3dssid"),c.searchParams.delete("3dssid"),window.history.pushState({},"",c.toString()),o.isCrossDomain=!0),a||(a=t.uuid(o.seed),this.registeredData&&this.registeredData.length>0&&(this.sessions=this.sessions.concat(this.registeredData))),t.setCookie("_dss",a,s,o.sessionDuration),o.user=d||t.getCookie("_dsu"),o.user?o.newVisitor=!1:(o.user=t.uuid(),o.newVisitor=!0),r.hasConsent()&&!r.isFunctionalConsent()?t.removeCookie("_dsu",s):t.setPersistantCookie("_dsu",o.user,s),o.sessionID!==a&&(o.seed=null,o.navigationStart=Date.now(),o.sessionID=a,m.clearData(this),this.pages.length&&(this.pages=this.pages.map(function(a){return e.extend(a,{id:t.uuid(),sessionID:o.sessionID,browseTime:Date.now()-o.navigationStart,r_timestamp:Date.now(),timestamp:Date.now()})})),this.sessions.push(m.getSession()),this.send({force:!0}))}};return{sessions:[],pages:[],interactions:[],events:[],errors:[],performances:[],gdpr_banners:[],registeredData:[],init:function(){console.log("Tracker.js - init - version "+o.trackerVersion);var a,n=this;a="string"==typeof arguments[0]?{uploadPath:arguments[0],service:arguments[1],user:arguments[2]}:arguments[0]||{};try{window.top.location.protocol}catch(e){!0}e.extend(o,{uploadPath:m.getValidURL(a.uploadPath),sessionDuration:a.sessionDuration||30,sendDebounceRate:a.sendDebounceRate||2500,userActivityThrottleRate:a.userActivityThrottleRate||5e3,userInteractionThrottleRate:a.userInteractionThrottleRate||1e3,userInteractionDebounceRate:a.userInteractionDebounceRate||500,service:a.service,authUser:a.user&&a.user.login||"",userUUID:a.user&&a.user.uuid||"",hostname:a.hostname||window.location.hostname,themKey:a.them||"webapp",seed:a.seed||null,trackXHRerrors:a.trackXHRerrors||!0,trackFetchErrors:a.trackFetchErrors||!0,enableCrossDomain:a.enableCrossDomain||a.isCrossDomain||!1,navigationStart:!window.performance||window.performance&&!window.performance.timing?Date.now():window.performance.timing.navigationStart,enablePerformanceTracking:a.enablePerformanceTracking||!0,enablePerformanceFullTracking:a.enablePerformanceFullTracking||!0,enableWidgetFullTracking:a.enableWidgetFullTracking||!1}),window.addEventListener("beforeunload",n.send.bind(n,{mode:"beacon"})),window.addEventListener("message",n.readMessage.bind(n)),window.addEventListener("mousemove",t.throttle(h.manageCookies.bind(n),o.userActivityThrottleRate,!1,!0)),o.enableWidgetFullTracking||(["click","dblclick","contextmenu","touchstart","touchend"].forEach(function(e){window.addEventListener(e,t.throttle(h.enableUserInteraction.bind(n,window),o.userInteractionThrottleRate,!0),!0)}),["scroll","mousemove","touchmove"].forEach(function(e){window.addEventListener(e,t.debounce(h.enableUserInteraction.bind(n,window),o.userInteractionDebounceRate),!0)})),o.enableCrossDomain&&(window.addEventListener("mousedown",h.crossDomainCheck),window.onload=function(){window.addEventListener("mousedown",h.crossDomainCheck)}),n.sendDebounced=t.debounce(n.send.bind(n),o.sendDebounceRate),o.enablePerformanceTracking&&!o.enablePerformanceFullTracking&&(h.startPerformanceTracking.bind(n,window)(),window.addEventListener("load",h.getLoadingPerformanceTracking.bind(n,window))),this.initListenerForWindow(window),h.manageCookies.call(n)},initListenerForWindow:function(e){var n=this;e.addEventListener("error",h.enableErrorTracking.bind(n,e)),e.addEventListener("unhandledrejection",h.enableUnhandledRejectionTracking.bind(n,e)),o.trackXHRerrors&&a.patch(h.enableXHRorFetchErrorTracking.bind(n,e),o.uploadPath,e),o.trackFetchErrors&&a.patchFetch(h.enableXHRorFetchErrorTracking.bind(n,e),o.uploadPath,e),o.enablePerformanceTracking&&o.enablePerformanceFullTracking&&(h.startPerformanceTracking.bind(n,e)(),e.addEventListener("load",h.getLoadingPerformanceTracking.bind(n,e))),o.enableWidgetFullTracking&&(["click","dblclick","contextmenu","touchstart","touchend"].forEach(function(a){e.addEventListener(a,t.throttle(h.enableUserInteraction.bind(n,e),o.userInteractionThrottleRate,!0),!0)}),["scroll","mousemove","touchmove"].forEach(function(a){e.addEventListener(a,t.debounce(h.enableUserInteraction.bind(n,e),o.userInteractionDebounceRate),!0)}))},readMessage:function(a){var r={};try{r=JSON.parse(a.data),m.flattenData(r)}catch(e){}if(!r.forAPI&&r.topic){switch(a.stopPropagation&&a.stopPropagation(),l(r)){case n.page.view:e.extend(r.data,{r_schemaName:"wapage3",r_schemaVersion:"1.16",r_service:o.service,r_timestamp:Date.now(),serverhostname:o.hostname,id:t.uuid(),sessionID:t.getCookie("_dss"),browseTime:Date.now()-o.navigationStart}),r.data.timestamp&&delete r.data.timestamp,this.pages.push(r.data);break;case n.page.event:e.extend(r.data,{r_schemaName:"waevent3",r_schemaVersion:"1.14",r_service:o.service,r_timestamp:Date.now(),id:t.uuid(),sessionID:t.getCookie("_dss"),sessionpageID:m.getLastPageID(this,r.data.trackerscope)}),r.data.timestamp&&delete r.data.timestamp,this.events.push(r.data);break;case n.page.interaction:case n.interaction.custom:e.extend(r.data,{r_schemaName:"wainteraction3",r_schemaVersion:"1.15",r_service:o.service,r_timestamp:Date.now(),sessionID:t.getCookie("_dss"),sessionpageID:m.getLastPageID(this)}),this.interactions.push(r.data);break;case n.data.register:e.extend(r.data,{r_schemaName:"wasession4",r_schemaVersion:"1.67",r_service:o.service,r_timestamp:Date.now(),sessionID:t.getCookie("_dss")}),e.extend(r.data,m.getConsentsAttributes()),this.registeredData.push(r.data),this.sessions.push(r.data);break;case n.error.runtime:e.extend(r.data,{r_schemaName:"waerror3",r_schemaVersion:"1.16",r_service:o.service,r_timestamp:Date.now(),id:t.uuid(),sessionID:t.getCookie("_dss"),sessionpageID:m.getLastPageID(this),level:"error"}),this.errors.push(r.data);break;case n.error.custom:e.extend(r.data,{r_schemaName:"waerror3",r_schemaVersion:"1.16",r_service:o.service,r_timestamp:Date.now(),id:t.uuid(),sessionID:t.getCookie("_dss"),sessionpageID:m.getLastPageID(this)}),this.errors.push(r.data);break;case n.page.performance:e.extend(r.data,{r_schemaName:"waperformance1",r_schemaVersion:"1.05",r_timestamp:Date.now(),r_service:o.service,id:r.data.fetchstart?t.getCookie("_dss")+"-"+Math.round(performance.timeOrigin).toString():t.uuid(),sessionID:t.getCookie("_dss"),sessionpageID:m.getLastPageID(this)}),this.performances.push(r.data);break;case n.performance.enableCustomPerformance:r.windowId&&!s.includes(r.windowId)&&s.push(r.windowId);break;case n.performance.custom:s.includes(r.windowId)&&(e.extend(r.data,{r_schemaName:"waperformanceCustom1",r_schemaVersion:"1.00",r_timestamp:Date.now(),r_service:o.service,id:r.data.fetchstart?t.getCookie("_dss")+"-"+Math.round(performance.timeOrigin).toString():t.uuid(),sessionID:t.getCookie("_dss"),sessionpageID:m.getLastPageID(this)}),this.performances.push(r.data));break;case n.gdpr_banner.custom:e.extend(r.data,{r_schemaName:"suwaconsentbannerchoice",r_schemaVersion:"1.04",r_timestamp:Date.now(),r_service:o.service,"event__id ":t.uuid(),event__start:Date.now(),wa__session__id:t.getCookie("_dss"),host__hostname:o.hostname,source__browser__locale:navigator.language||"en-US",user_agent__original:t.clientEngine.userAgent}),this.gdpr_banners.push(r.data);break;case n.window.init:if(r.data){let e=document.getElementById(r.data);e&&this.initListenerForWindow(e.contentWindow)}return}m.pruneData(this),this.sendDebounced||(this.sendDebounced=t.debounce(this.send.bind(this),o.sendDebounceRate)),r.sync?this.send():this.sendDebounced()}},send:function(e){var a,n=new FormData,i=new FormData,s=e&&e.mode||"xhr",c=this,d=0,p=0;this.gdpr_banners&&(this.gdpr_banners.forEach(function(e){i.append("usage"+p,JSON.stringify(e)),p++}),p&&("beacon"===s?navigator.sendBeacon?navigator.sendBeacon(o.uploadPath,i):t.beaconPolyfill(o.uploadPath,i):((a=new XMLHttpRequest).open("POST",o.uploadPath),a.send(i)))),m.models.forEach(function(e){c[e.internal].forEach(function(t){n.append(e.payload+d,JSON.stringify(t)),d++})}),d&&((!r.hasConsent()||r.isFunctionalConsent()||e&&e.force)&&("beacon"===s?navigator.sendBeacon?navigator.sendBeacon(o.uploadPath,n):t.beaconPolyfill(o.uploadPath,n):((a=new XMLHttpRequest).open("POST",o.uploadPath),a.send(n))),m.clearData(this))}}}),define("DS/Usage/UsageManager",["DS/Usage/UsageShardingManager"],function(e){return{init:function(){var t;t="string"==typeof arguments[0]?{uploadPath:arguments[0],service:arguments[1],user:arguments[2]}:arguments[0]||{},e.init(t)}}}),define("DS/Usage/AbstractTracker",["DS/WebappsUtils/Inherit","DS/WebappsUtils/Promise","DS/WebappsUtils/Emitter","DS/Usage/Events"],function(e,t,a,n){"use strict";function r(e){this.name=e}return e.inherit(r,{set:function(e,t){var r;"object"==typeof e?(r=e,t=void 0):(r={})[e]=t,Object.keys(r).length>0&&(r.name=this.name,r.type=this.type,a.trigger(n.tracker.update,r))},get:function(){var e=this;return new t(function(t){var r=n.tracker.gotContent+":"+e.name,o=n.tracker.getContent+":"+e.name;a.on(r,function(n){a.off(r),n&&n.data&&n.data.name===e.name&&t(n.data)}),a.trigger(o,{name:e.name})})}}),r}),define("DS/Usage/ActionTracker",["DS/WebappsUtils/Inherit","DS/Usage/AbstractTracker","DS/WebappsUtils/Console"],function(e,t,a){"use strict";function n(e){a.warn("Module DS/Usage/ActionTracker is deprecated. Use DS/Usage/TrackerAPI#trackPageEvent instead"),t.call(this,e),this.type="action"}return e.inherit(n,t),n}),define("DS/Usage/TrackerAPI",["DS/WebappsUtils/Inherit","DS/WebappsUtils/Emitter","DS/Usage/ActionTracker","DS/Usage/Events"],function(e,t,a,n){"use strict";var r=!1,o=function(){var e=window.location,t=window.top.location;try{t.protocol}catch(e){r=!0}return r?{}:{current:e.protocol+"//"+e.hostname+(e.port?":"+e.port:""),parent:t.protocol+"//"+t.hostname+(t.port?":"+t.port:"")}}(),i=r?window:window.top;function s(e){return"string"==typeof e||e instanceof String}function c(e){return"number"==typeof e&&isFinite(e)}function d(e){return e&&"object"==typeof e&&e.constructor===Object}function p(e){return"function"==typeof e}function u(e){var t=!0;if(!d(e))return!1;if(0==Object.keys(e).length)return!1;if(Object.keys(e).length>20)return!1;for(var a in e)e.hasOwnProperty(a)&&(/^(pd|pv)[0-9]+$/.test(a)||(t=!1),s(e[a])||(t=!1));return t}function g(e){var t=!0;if(!d(e))return!1;if(0==Object.keys(e).length)return!1;if(Object.keys(e).length>20)return!1;for(var a in e)e.hasOwnProperty(a)&&(/^(pd|pv)[0-9]+$/.test(a)||(t=!1),c(e[a])||(t=!1));return t}function l(){var e={};return window&&window.widget&&(e.widgetinstancetitle=window.widget.title,e.widgetinstanceid=window.widget.id),e}const m="TrackerJS - One or more mandatory fields are missing";var h={getTracker:function(){var t,r,o=arguments,i=o[0],s=o[1],c=o[2];if(void 0===c&&"object"==typeof s?(c=s,s=i,i="action"):void 0===c&&"string"==typeof s?c={}:void 0===s&&void 0===c&&("string"==typeof i?(s=i,i="action",c={}):(s=(r=e.clone(i)).name,i=r.type,c=r.options||{})),void 0===s)throw new TypeError("No tracker name specified");switch(i){case"action":var d=c;d.name=s,this.notify(d,n.tracker.creation),t=new a(s)}return t},trackPageView:function(e,t,a,r,c){var h=arguments[0];if(d(h)&&(e=h.pageURL,t=h.pageTitle,a=h.persDim,r=h.pageLanguage,c={persVal:h.persVal,appID:h.appID,tenant:h.tenant,scope:h.scope,type:h.type}),!e||!s(e))return void console.log(m);var f={origin:o.current,topic:n.page.view,sync:!!h.callback,data:{url:e,location:window.location.href,timestamp:Date.now(),pagelg:r||(window.dsLang?window.dsLang:"")}};t&&s(t)&&(f.data.title=t),a&&u(a)&&(f.data.persDimPages=[a]),c&&d(c)&&g(c.persVal)&&(f.data.persValPages=[c.persVal]),c&&d(c)&&c.appID&&(f.data.appID=c.appID),c&&d(c)&&c.tenant&&(f.data.tenant=c.tenant),c&&d(c)&&s(c.scope)&&(f.data.trackerscope=c.scope),c&&d(c)&&s(c.type)&&(f.data.type=c.type);const w=window.performance.getEntriesByType("navigation").map(e=>e.type);w&&w.length>0&&s(w[0])&&(f.data.navigationtype=w[0]),f.data={...f.data,...l()},i.postMessage&&i.postMessage(JSON.stringify(f),o.parent||window.location.origin),p(h.callback)&&setTimeout(h.callback,0)},trackPageEvent:function(e,t,a,r,h,f){var w=arguments[0];if(d(w)&&(e=w.eventCategory,t=w.eventAction,a=w.eventLabel,r=w.eventValue,h=w.persDim,f={persVal:w.persVal,appID:w.appID,tenant:w.tenant,scope:w.scope}),e&&s(e)&&t&&s(t)){var v={origin:o.current,topic:n.page.event,sync:!!w.callback,data:{category:e,action:t,timestamp:Date.now()}};a&&s(a)&&(v.data.label=a),null!=r&&c(r)&&(v.data.value=r),h&&u(h)&&(v.data.persDimPageEvents=[h]),f&&d(f)&&g(f.persVal)&&(v.data.persValPageEvents=[f.persVal]),f&&d(f)&&f.appID&&(v.data.appID=f.appID),f&&d(f)&&f.tenant&&(v.data.tenant=f.tenant),f&&d(f)&&s(f.scope)&&(v.data.trackerscope=f.scope),v.data={...v.data,...l()},i.postMessage&&i.postMessage(JSON.stringify(v),o.parent||window.location.origin),p(w.callback)&&setTimeout(w.callback,0)}else console.log(m)},trackPageError:function(e,t,a,r,c,h){var f=arguments[0];if(d(f)&&(e=f.errorLevel,t=f.errorMessage,a=f.errorName,r=f.errorSource,c=f.persDim,h={persVal:f.persVal,errorSourceColumn:f.errorSourceColumn,errorSourceLine:f.errorSourceLine,errorStack:f.errorStack,errorCode:f.errorCode,errorType:f.errorType,errorTargetUrl:f.errorTargetUrl,errorMethodUrl:f.errorMethodUrl,errorDuration:f.errorDuration,appID:f.appID,scope:f.scope,tenant:f.tenant,category:f.category||"custom"}),e&&s(e)&&t&&s(t)&&a&&s(a)&&r&&s(r)){var w={origin:o.current,topic:n.error.custom,sync:!!f.callback,data:{level:e,message:t,name:a,source:r,timestamp:Date.now()}};h&&d(h)&&h.errorSourceColumn&&(w.data.column=h.errorSourceColumn),h&&d(h)&&h.errorSourceLine&&(w.data.line=h.errorSourceLine),h&&d(h)&&h.errorStack&&(w.data.stack=h.errorStack),h&&d(h)&&h.errorCode&&(w.data.code=h.errorCode),h&&d(h)&&h.errorType&&(w.data.type=h.errorType),h&&d(h)&&h.errorTargetUrl&&(w.data.targeturl=h.errorTargetUrl),h&&d(h)&&h.errorMethodUrl&&(w.data.methodurl=h.errorMethodUrl),h&&d(h)&&h.errorDuration&&(w.data.duration=h.errorDuration),h&&d(h)&&h.appID&&(w.data.appID=h.appID),h&&d(h)&&s(h.scope)&&(w.data.trackerscope=h.scope),c&&u(c)&&(w.data.persDimPageError=[c]),h&&d(h)&&g(h.persVal)&&(w.data.persValPageError=[h.persVal]),h&&d(h)&&h.tenant&&(w.data.tenant=h.tenant),h&&d(h)&&s(h.category)&&(w.data.category=h.category),w.data={...w.data,...l()},i.postMessage&&i.postMessage(JSON.stringify(w),o.parent||window.location.origin),p(f.callback)&&setTimeout(f.callback,0)}else console.log(m)},trackPageInteraction:function(e){var t={origin:o.current,topic:n.interaction.custom,sync:!!e.callback,data:{}};e&&d(e)&&e.className&&(t.data.className=e.className),e&&d(e)&&e.tagName&&(t.data.tagName=e.tagName),e&&d(e)&&e.action&&(t.data.action=e.action),e&&d(e)&&e.clientX&&(t.data.clientX=e.clientX),e&&d(e)&&e.clientY&&(t.data.clientY=e.clientY),e&&d(e)&&e.tenant&&(t.data.tenant=e.tenant),e&&d(e)&&e.iframeUrl&&(t.data.iframeurl=e.iframeUrl),e&&d(e)&&e.appID&&(t.data.appID=e.appID),e&&d(e)&&c(e.viewportTop)&&(t.data.viewportTop=e.viewportTop),e&&d(e)&&c(e.viewportBottom)&&(t.data.viewportBottom=e.viewportBottom),e&&d(e)&&c(e.viewportLeft)&&(t.data.viewportLeft=e.viewportLeft),e&&d(e)&&c(e.viewportRight)&&(t.data.viewportRight=e.viewportRight),e&&d(e)&&c(e.pageHeight)&&(t.data.pageHeight=e.pageHeight),e&&d(e)&&c(e.pageWidth)&&(t.data.pageWidth=e.pageWidth),e&&d(e)&&u(e.persDim)&&(t.data.persDimInteractions=[e.persDim]),e&&d(e)&&g(e.persVal)&&(t.data.persValInteractions=[e.persVal]),i.postMessage&&i.postMessage(JSON.stringify(t),o.parent||window.location.origin),p(e.callback)&&setTimeout(e.callback,0)},enableCustomPerformance:function(){var e={origin:o.current,topic:n.performance.enableCustomPerformance,windowId:window.self&&window.self.frameElement&&window.self.frameElement.id||"top"};i.postMessage&&i.postMessage(JSON.stringify(e),o.parent||window.location.origin)},trackPagePerformance:function(e){var t={origin:o.current,topic:n.performance.custom,sync:!!e.callback,data:{},windowId:window.self&&window.self.frameElement&&window.self.frameElement.id||"top"};e&&d(e)&&s(e.endpoint)&&c(e.startTime)&&c(e.duration)&&c(e.transferSize)&&s(e.blockingStatus)&&s(e.category)?(t.data.endpoint=e.endpoint,t.data.starttime=e.startTime,t.data.duration=e.duration,t.data.transfersize=e.transferSize,t.data.blockingStatus=e.blockingStatus,t.data.category=e.category,s(e.appID)&&(t.data.appID=e.appID),s(e.tenant)&&(t.data.tenant=e.tenant),s(e.category)&&(t.data.category=e.category),s(e.method)&&(t.data.method=e.method),s(e.statusCode)&&(t.data.statusCode=e.viewportRight),u(e.persDim)&&(t.data.persDimInteractions=[e.persDim]),g(e.persVal)&&(t.data.persValInteractions=[e.persVal]),t.data={...t.data,...l()},i.postMessage&&i.postMessage(JSON.stringify(t),o.parent||window.location.origin),p(e.callback)&&setTimeout(e.callback,0)):console.log(m)},registerData:function(){var e,t,a=arguments;!r&&a.length&&(1===a.length&&"object"==typeof a[0]?e=a[0]:a.length>1&&((e={})[a[0]]=a[1]),e&&(t={origin:o.current,topic:n.data.register,data:e},i.postMessage&&i.postMessage(JSON.stringify(t),o.parent||window.location.origin)))},trackGDPRBanner:function(e,t){var a=arguments[0];if(d(a)&&(e=a.eventName,t={consentDetailed:a.consentDetailed,bannerVersion:a.bannerVersion,consentedNecessary:a.consentedNecessary,consentedFunctional:a.consentedFunctional,consentedAdvertising:a.consentedAdvertising,waPageviewPlatformLanguage:a.waPageviewPlatformLanguage}),e&&s(e)){var r={origin:o.current,topic:n.gdpr_banner.custom,sync:!!a.callback,data:{event__name:e}};t&&d(t)&&t.consentDetailed&&(r.data.wa__consent__detailed=t.consentDetailed),t&&d(t)&&t.bannerVersion&&(r.data.wa__consent__privacy_banner_version=t.bannerVersion),t&&d(t)&&t.consentedNecessary&&(r.data.wa__consent__consented_necessary=t.consentedNecessary),t&&d(t)&&t.consentedFunctional&&(r.data.wa__consent__consented_functional=t.consentedFunctional),t&&d(t)&&t.consentedAdvertising&&(r.data.wa__consent__consented_advertising=t.consentedAdvertising),t&&d(t)&&t.waPageviewPlatformLanguage&&(r.data.wa__pageview__platform_language=t.waPageviewPlatformLanguage),i.postMessage&&i.postMessage(JSON.stringify(r),o.parent||window.location.origin),p(a.callback)&&setTimeout(a.callback,0)}else console.log(m)},notify:function(e,t){var a={origin:o.current,topic:t,data:e};i.postMessage&&i.postMessage(JSON.stringify(a),o.parent||window.location.origin)},init:function(){var a=this;if(!this._initiated&&(this._initiated=!0,t.on("*",function(t,n){n.forAPI||a.notify(e.clone(n),t)}),window.addEventListener("message",function(e){var a={};try{a=JSON.parse(e.data)}catch(e){}a.forAPI&&(e.stopPropagation(),t.trigger(a.topic,a))}),!r&&window.self!==window.top)){var s={origin:o.current,topic:n.window.init,data:window.self&&window.self.frameElement&&window.self.frameElement.id};i.postMessage&&i.postMessage(JSON.stringify(s),o.parent||window.location.origin)}}};return h.init(),h});
